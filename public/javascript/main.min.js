function readURL(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#product-avatar").attr("src",e.target.result)},t.readAsDataURL(e.files[0])}}function sleep(e){return new Promise(t=>setTimeout(t,e))}function FilterInventory(){(function(e){"use strict";var t=function(t){function n(n){o=n.target;var a=e.getElementsByClassName(o.getAttribute("data-table"));t.forEach.call(a,function(e){t.forEach.call(e.tBodies,function(e){t.forEach.call(e.rows,l)})})}function l(e){var t=e.textContent.toLowerCase(),n=o.value.toLowerCase();e.style.display=-1===t.indexOf(n)?"none":"table-row"}var o;return{init:function(){var l=e.getElementsByClassName("light-table-filter");t.forEach.call(l,function(e){e.oninput=n})}}}(Array.prototype);e.addEventListener("readystatechange",function(){"complete"===e.readyState&&t.init()})})(document)}UTIL={fire:function(e,t,n){var l=dailyreport;t=void 0===t?"init":t,""!==e&&l[e]&&"function"==typeof l[e][t]&&l[e][t](n)},loadEvents:function(){var e=document.body.id;UTIL.fire("common"),$.each(document.body.className.split(/\s+/),function(t,n){UTIL.fire(n),UTIL.fire(n,e)}),UTIL.fire("common","finalize")}},$(document).ready(UTIL.loadEvents),dailyreport={__home:{init:function(){FilterInventory(),$("#toggler").click(function(){$("#vertical-navigation").toggleClass("v-nav-expand")});const e=document.querySelectorAll("#nav-tabs > a");e.forEach(t=>{t.addEventListener("click",()=>{e.forEach(e=>{e.classList.remove("active")}),t.classList.add("active")})})}},__login:{init:function(){const e=document.getElementById("login-pwd");e.onpaste=(e=>(e.preventDefault(),!1)),$(".message a").click(function(){$("form").animate({height:"toggle",opacity:"toggle"},"slow")})}},__add:{init:function(){FilterInventory();document.getElementById("cyber-cash"),document.getElementById("cyber-till"),document.getElementById("ps-cash"),document.getElementById("ps-till"),document.getElementById("movie-cash"),document.getElementById("movie-till");const e=document.getElementById("sales-cash"),t=document.getElementById("sales-till"),n=document.getElementById("bought-price"),l=document.getElementById("sales-profit");document.getElementById("expense-value");e.addEventListener("input",function(){""!==t.value?(t.style.border="2px solid red",t.style.outline="none",document.getElementsByName("sales-till")[0].placeholder="fill one only",sleep(1e3).then(()=>{document.getElementsByName("sales-till")[0].placeholder="sell..till/other",t.style.border="",t.style.outline="",t.value=""})):""==e.value?l.value=0:l.value=e.value-n.value}),t.addEventListener("input",function(){""!==e.value?(e.style.border="2px solid red",e.style.outline="none",document.getElementsByName("sales-cash")[0].placeholder="fill one only",sleep(1e3).then(()=>{document.getElementsByName("sales-till")[0].placeholder="sell..cash",e.style.border="",e.style.outline="",e.value=""})):""==t.value?l.value=0:l.value=t.value-n.value});$(document).on("input",".income-calc",function(){var e=0;$(".income-calc").each(function(){e+=+$(this).val()}),$("#total-cash").val(e);$("#total-cash").val(e);document.getElementById("total-sales-out-cash").innerHTML=`cash total: ${e}`}),$(document).on("input",".income-calc-till",function(){var e=0;$(".income-calc-till").each(function(){e+=+$(this).val()}),$("#total-till").val(e);$("#total-till").val(e);document.getElementById("total-sales-out-till").innerHTML=`till total: ${e}`});var o=document.getElementById("product");o.addEventListener("change",function(){currentOption=o.value,currentOptionText=this.options[this.selectedIndex].text,$("#sc").load(`loadBuying/${currentOption}`,function(e,t,n){document.getElementById("bought-price").value=e,document.getElementById("bought-item").value=currentOptionText})}),$(document).ready(function(){$("form").on("submit",function(e){e.preventDefault();var t=$(this);if(""==l.value)document.getElementById("sales-cash").style.border="1.5px solid red",document.getElementById("bought-item").style.border="1.5px solid red",document.getElementById("bought-price").style.border="1.5px solid red",document.getElementById("sales-till").style.border="1.5px solid red",sleep(2500).then(()=>{document.getElementById("bought-item").style.border="",document.getElementById("bought-price").style.border="",document.getElementById("sales-cash").style.border="",document.getElementById("sales-till").style.border=""});else{document.getElementById("bought-price").value,document.getElementById("bought-item").value,document.getElementById("sales-cash").value,document.getElementById("sales-till").value,document.getElementById("sales-profit").value,document.getElementById("product").value;$.ajax({url:"http://localhost/dailyreport-holics/pages/saveSaleCash",type:"POST",data:t.serialize(),dataType:"json",success:function(e){200==e.statusCode?([document.getElementById("bought-price"),document.getElementById("bought-item"),document.getElementById("sales-cash"),document.getElementById("sales-till"),document.getElementById("sales-profit")].forEach(e=>{e.value=""}),$("#product").prop("selected",function(){return this.defaultSelected}),$("#sc").load("loadLatestSold"),$("#open-modal").load("loadInventoryData")):317==e.statusCode?(document.querySelector(".alert").style.display="block",document.getElementById("add-alert").style.color="#f85f5f",$("#add-alert").html("connection error, check databse or internet connection"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("add-alert").innerHTML=""})):318==e.statusCode&&(document.querySelector(".alert").style.display="block",document.getElementById("add-alert").style.color="#f85f5f",$("#add-alert").html("the item is currently not in stock, please add it first"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("add-alert").innerHTML=""}))}})}})})}},__verify:{init:function(){function e(){const e=document.getElementById("passwordnew"),t=document.querySelector("#passwordnew-err");e.value.length<8?(e.style.border="2px solid red",e.style.outline="none",t.style.display="block",t.innerHTML="password must contain at least 8 characters   1 lowercase character 1 upercase character and  1 numeric value",sleep(7500).then(()=>{t.style.display="none"})):(t.style.display="none",e.style.border="")}function t(){const e=document.getElementById("passwordnew-c"),t=document.getElementById("passwordnew"),n=document.querySelector("#passwordnew-err-c");e.value!==t.value?(e.style.border="2px solid red",e.style.outline="none",n.style.display="block",n.innerHTML="password do not match",sleep(7500).then(()=>{n.style.display="none"})):(n.style.display="none",e.style.border="")}document.getElementById("passwordnew").addEventListener("input",e),document.getElementById("passwordnew-c").addEventListener("input",t)}},__plastation:{init:function(){FilterInventory()}},__cyber:{init:function(){FilterInventory()}},__addItem:{init:function(){FilterInventory(),$(document).ready(function(){$("form").on("submit",function(e){e.preventDefault();var t=document.querySelector("#item-name"),n=document.querySelector("#item-quantity"),l=document.querySelector("#item-bp"),o=document.querySelector("#model");itemImage=document.querySelector("#product-image");var a=new FormData,r=$("#product-image")[0].files[0];a.append("product-image",r),$.ajax({url:"http://localhost/dailyreport-holics/pages/saveInventory",type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,dataType:"json",success:function(e){200==e.statusCode?(document.querySelector(".alert_success").style.display="none",document.getElementsByClassName("loader")[0].style.display="block",sleep(2100).then(()=>{document.getElementsByClassName("loader")[0].style.display="none",document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.display="block",document.getElementById("inventory-alert").style.color="#fff",document.getElementById("inventory-alert").innerHTML="item added successfully!",$("#open-modal").load("loadInventoryData"),[t,n,l,o,itemImage].forEach(e=>{e.value=""}),$("#product-avatar").attr("src","http://localhost/dailyreport-holics/public/images/images/open-box.png"),document.getElementById("product-image").value="",sleep(3500).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""})})):201==e.statusCode?(document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.color="#f85f5f",$("#inventory-alert").html("invalid file or missing field, please try again"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""})):417==e.statusCode?(document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.color="#f85f5f",$("#inventory-alert").html("request could not be completed, check your connection"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""})):317==e.statusCode&&(document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.color="#f85f5f",$("#inventory-alert").html("please change the item name or image name, a similar record already exists"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""}))}})})})}},__expense:{init:function(){FilterInventory()}},__filterReport:{init:function(){FilterInventory()}},__movieshop:{init:function(){FilterInventory()}},__sales:{init:function(){FilterInventory()}},__total:{init:function(){FilterInventory()}}};