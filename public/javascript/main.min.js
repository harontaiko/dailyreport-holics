function readURL(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#product-avatar").attr("src",e.target.result)},t.readAsDataURL(e.files[0])}}function sleep(e){return new Promise(t=>setTimeout(t,e))}function FilterInventory(){(function(e){"use strict";var t=function(t){function n(n){o=n.target;var r=e.getElementsByClassName(o.getAttribute("data-table"));t.forEach.call(r,function(e){t.forEach.call(e.tBodies,function(e){t.forEach.call(e.rows,l)})})}function l(e){var t=e.textContent.toLowerCase(),n=o.value.toLowerCase();e.style.display=-1===t.indexOf(n)?"none":"table-row"}var o;return{init:function(){var l=e.getElementsByClassName("light-table-filter");t.forEach.call(l,function(e){e.oninput=n})}}}(Array.prototype);e.addEventListener("readystatechange",function(){"complete"===e.readyState&&t.init()})})(document)}var hostUrl=document.querySelector("link[rel='host']").getAttribute("href");console.log(hostUrl),UTIL={fire:function(e,t,n){var l=dailyreport;t=void 0===t?"init":t,""!==e&&l[e]&&"function"==typeof l[e][t]&&l[e][t](n)},loadEvents:function(){var e=document.body.id;UTIL.fire("common"),$.each(document.body.className.split(/\s+/),function(t,n){UTIL.fire(n),UTIL.fire(n,e)}),UTIL.fire("common","finalize")}},$(document).ready(UTIL.loadEvents),dailyreport={__home:{init:function(){$("#latest-record").animate({opacity:0},1e3),$("#latest-record").animate({opacity:1},1e3),sleep(4700).then(()=>{$("#latest-record").animate({opacity:0},0),$("#latest-record").animate({opacity:1},0)}),FilterInventory(),$("#toggler").click(function(){$("#vertical-navigation").toggleClass("v-nav-expand")});const e=document.querySelectorAll("#nav-tabs > a");e.forEach(t=>{t.addEventListener("click",()=>{e.forEach(e=>{e.classList.remove("active")}),t.classList.add("active")})})}},__login:{init:function(){const e=document.getElementById("login-pwd");e.onpaste=(e=>(e.preventDefault(),!1)),$(".message a").click(function(){$("form").animate({height:"toggle",opacity:"toggle"},"slow")})}},__add:{init:function(){window.onbeforeunload=function(e){return window.confirm()},$(document).on("submit","form",function(e){window.onbeforeunload=null}),FilterInventory();const e=document.getElementById("cyber-cash"),t=document.getElementById("cyber-till"),n=document.getElementById("ps-cash"),l=document.getElementById("ps-till"),o=document.getElementById("movie-cash"),r=document.getElementById("movie-till"),a=document.getElementById("sales-cash"),s=document.getElementById("sales-till"),d=document.getElementById("bought-price"),c=document.getElementById("sales-profit");document.getElementById("expense-value");a.addEventListener("input",function(){""!==s.value?(s.style.border="2px solid red",s.style.outline="none",document.getElementsByName("sales-till")[0].placeholder="fill one only",sleep(1e3).then(()=>{document.getElementsByName("sales-till")[0].placeholder="sell..till/other",s.style.border="",s.style.outline="",s.value=""})):""==a.value?c.value=0:c.value=a.value-d.value}),s.addEventListener("input",function(){""!==a.value?(a.style.border="2px solid red",a.style.outline="none",document.getElementsByName("sales-cash")[0].placeholder="fill one only",sleep(1e3).then(()=>{document.getElementsByName("sales-till")[0].placeholder="sell..cash",a.style.border="",a.style.outline="",a.value=""})):""==s.value?c.value=0:c.value=s.value-d.value});$(document).on("input",".income-calc",function(){var e=0;$(".income-calc").each(function(){e+=+$(this).val()}),$("#total-cash").val(e);$("#total-cash").val(e);document.getElementById("total-sales-out-cash").innerHTML=`cash total: ${e}`}),$(document).on("input",".income-calc-till",function(){var e=0;$(".income-calc-till").each(function(){e+=+$(this).val()}),$("#total-till").val(e);$("#total-till").val(e);document.getElementById("total-sales-out-till").innerHTML=`till total: ${e}`});var u=document.getElementById("product");u.addEventListener("change",function(){currentOption=u.value,currentOptionText=this.options[this.selectedIndex].text,$("#sc").load(`loadBuying/${currentOption}`,function(e,t,n){document.getElementById("bought-price").value=e,document.getElementById("bought-item").value=currentOptionText})}),$(document).ready(function(){$("#exp").load("loadLatestExpense"),$("#sl").load("loadLatestSold"),$(".save-record").click(function(a){a.preventDefault(),""==e.value||""==t.value||""==o.value||""==r.value||""==n.value||""==l.value?(t.style.border="1.5px solid red",e.style.border="1.5px solid red",r.style.border="1.5px solid red",o.style.border="1.5px solid red",n.style.border="1.5px solid red",l.style.border="1.5px solid red",sleep(2500).then(()=>{t.style.border="",e.style.border="",r.style.border="",o.style.border="",n.style.border="",l.style.border=""})):$.ajax({url:"https://report.dailyhackstore.co.ke/pages/CheckSaleExpense",type:"GET",dataType:"json",success:function(a){200==a.statusCode?(result1=confirm("do you confirm that the sale data is correct, click ok to seed and save record"),result1&&$.ajax({url:"https://report.dailyhackstore.co.ke/pages/SaveSaleRecord",type:"POST",data:{cybercash:e.value,cybertill:t.value,moviecash:o.value,movietill:r.value,pscash:n.value,pstill:l.value},dataType:"json",success:function(e){200==e.statusCode?$.ajax({url:"https://report.dailyhackstore.co.ke/pages/SaveNetTotal",type:"POST",dataType:"json",success:function(e){200==e.statusCode?location.replace("https://report.dailyhackstore.co.ke/pages/index"):317==e.statusCode&&(document.querySelector(".alert").style.display="block",document.getElementById("add-alert").style.color="#fff",$("#add-alert").html("an error occurred, record could not be saved, please check your connection"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("add-alert").innerHTML=""}))}}):317==e.statusCode&&(document.querySelector(".alert").style.display="block",document.getElementById("add-alert").style.color="#fff",$("#add-alert").html("an error occurred, record could not be saved, please check your connection"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("add-alert").innerHTML=""}))}})):317==a.statusCode?(result2=confirm("No sale made, do you still want to continue?"),result2):318==a.statusCode?(result2=confirm("No expenses added, do you still want to continue?"),result2):319==a.statusCode&&(result2=confirm("No sale or expense today, do you still want to continue?"),result2)}})}),$("#n-expense").click(function(e){if(""==document.getElementById("expense_n").value||""==document.getElementById("expense-value").value)document.getElementById("expense_n").style.border="1.5px solid red",document.getElementById("expense-value").style.border="1.5px solid red",sleep(2250).then(()=>{document.getElementById("expense_n").style.border="",document.getElementById("expense-value").style.border=""});else{var t=document.getElementById("expense_n").value,n=document.getElementById("expense-value").value;$.ajax({url:"https://report.dailyhackstore.co.ke/pages/SaveExpense",type:"POST",data:{expense:t,amount:n},dataType:"json",success:function(e){200==e.statusCode?([document.getElementById("expense_n"),document.getElementById("expense-value")].forEach(e=>{e.value=""}),$("#exp").load("loadLatestExpense")):e.statusCode}})}}),$("form").on("submit",function(e){e.preventDefault();var t=$(this);if(""==c.value)document.getElementById("sales-cash").style.border="1.5px solid red",document.getElementById("bought-item").style.border="1.5px solid red",document.getElementById("bought-price").style.border="1.5px solid red",document.getElementById("sales-till").style.border="1.5px solid red",sleep(2500).then(()=>{document.getElementById("bought-item").style.border="",document.getElementById("bought-price").style.border="",document.getElementById("sales-cash").style.border="",document.getElementById("sales-till").style.border=""});else{document.getElementById("bought-price").value,document.getElementById("bought-item").value,document.getElementById("sales-cash").value,document.getElementById("sales-till").value,document.getElementById("sales-profit").value,document.getElementById("product").value;$.ajax({url:"https://report.dailyhackstore.co.ke/pages/saveSaleCash",type:"POST",data:t.serialize(),dataType:"json",success:function(e){200==e.statusCode?([document.getElementById("bought-price"),document.getElementById("bought-item"),document.getElementById("sales-cash"),document.getElementById("sales-till"),document.getElementById("sales-profit")].forEach(e=>{e.value=""}),$("#product").prop("selected",function(){return this.defaultSelected}),$("#sl").load("loadLatestSold"),$("#open-modal").load("loadInventoryData")):317==e.statusCode?([document.getElementById("bought-price"),document.getElementById("bought-item"),document.getElementById("sales-cash"),document.getElementById("sales-till"),document.getElementById("sales-profit")].forEach(e=>{e.value=""}),document.querySelector(".alert").style.display="block",document.getElementById("add-alert").style.color="#f85f5f",$("#add-alert").html("connection error, check database or internet connection"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("add-alert").innerHTML=""})):318==e.statusCode&&([document.getElementById("bought-price"),document.getElementById("bought-item"),document.getElementById("sales-cash"),document.getElementById("sales-till"),document.getElementById("sales-profit")].forEach(e=>{e.value=""}),document.querySelector(".alert").style.display="block",document.getElementById("add-alert").style.color="#fff",$("#add-alert").html("the item is currently not in stock, add it to the inventory first!"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("add-alert").innerHTML=""}))}})}})})}},__verify:{init:function(){function e(){const e=document.getElementById("passwordnew"),t=document.querySelector("#passwordnew-err");e.value.length<8?(e.style.border="2px solid red",e.style.outline="none",t.style.display="block",t.innerHTML="password must contain at least 8 characters   1 lowercase character 1 upercase character and  1 numeric value",sleep(7500).then(()=>{t.style.display="none"})):(t.style.display="none",e.style.border="")}function t(){const e=document.getElementById("passwordnew-c"),t=document.getElementById("passwordnew"),n=document.querySelector("#passwordnew-err-c");e.value!==t.value?(e.style.border="2px solid red",e.style.outline="none",n.style.display="block",n.innerHTML="password do not match",sleep(7500).then(()=>{n.style.display="none"})):(n.style.display="none",e.style.border="")}document.getElementById("passwordnew").addEventListener("input",e),document.getElementById("passwordnew-c").addEventListener("input",t)}},__playstation:{init:function(){FilterInventory();var e=document.getElementById("filter-playstation");e.addEventListener("change",function(){currentOption=e.value,currentOptionText=this.options[this.selectedIndex].value,location.replace(`https://report.dailyhackstore.co.ke/pages/reports/ps/${currentOptionText}`)}),document.getElementById("get-repo-btw").addEventListener("click",()=>{var e=document.querySelector("#date-1"),t=document.querySelector("#date-2");""!==e.value&&""!==t.value?location.replace(`https://report.dailyhackstore.co.ke/pages/date/ps/${e.value}/${t.value}`):(e.style.border="2px solid red",e.style.outline="none",t.style.border="2px solid red",t.style.outline="none",sleep(2500).then(()=>{e.style.border="",e.style.outline="",t.style.border="",t.style.outline=""}))})}},__cyber:{init:function(){FilterInventory();var e=document.getElementById("filter-cyber");e.addEventListener("change",function(){currentOption=e.value,currentOptionText=this.options[this.selectedIndex].value,location.replace(`https://report.dailyhackstore.co.ke/pages/reports/cyber/${currentOptionText}`)}),document.getElementById("get-repo-btw").addEventListener("click",()=>{var e=document.querySelector("#date-1"),t=document.querySelector("#date-2");""!==e.value&&""!==t.value?location.replace(`https://report.dailyhackstore.co.ke/pages/date/cyber/${e.value}/${t.value}`):(e.style.border="2px solid red",e.style.outline="none",t.style.border="2px solid red",t.style.outline="none",sleep(2500).then(()=>{e.style.border="",e.style.outline="",t.style.border="",t.style.outline=""}))})}},__addItem:{init:function(){FilterInventory(),$(document).ready(function(){$("form").on("submit",function(e){e.preventDefault();var t=document.querySelector("#item-name"),n=document.querySelector("#item-quantity"),l=document.querySelector("#item-bp"),o=document.querySelector("#model");itemImage=document.querySelector("#product-image");var r=new FormData,a=$("#product-image")[0].files[0];r.append("product-image",a),$.ajax({url:"https://report.dailyhackstore.co.ke/pages/saveInventory",type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,dataType:"json",success:function(e){200==e.statusCode?(document.querySelector(".alert_success").style.display="none",document.getElementsByClassName("loader")[0].style.display="block",sleep(2100).then(()=>{document.getElementsByClassName("loader")[0].style.display="none",document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.display="block",document.getElementById("inventory-alert").style.color="#fff",document.getElementById("inventory-alert").innerHTML="item added successfully!",$("#open-modal").load("loadInventoryData"),[t,n,l,o,itemImage].forEach(e=>{e.value=""}),$("#product-avatar").attr("src","https://report.dailyhackstore.co.ke/public/images/images/open-box.png"),document.getElementById("product-image").value="",sleep(3500).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""})})):201==e.statusCode?(document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.color="#f85f5f",$("#inventory-alert").html("invalid file or missing field, please try again"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""})):417==e.statusCode?(document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.color="#f85f5f",$("#inventory-alert").html("request could not be completed, check your connection"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""})):317==e.statusCode&&(document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.color="#f85f5f",$("#inventory-alert").html("please change the item name or image name, a similar record already exists"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""}))}})})})}},__expense:{init:function(){FilterInventory();var e=document.getElementById("filter-expense");e.addEventListener("change",function(){currentOption=e.value,currentOptionText=this.options[this.selectedIndex].value,location.replace(`https://report.dailyhackstore.co.ke/pages/reports/expense/${currentOptionText}`)}),document.getElementById("get-repo-btw").addEventListener("click",()=>{var e=document.querySelector("#date-1"),t=document.querySelector("#date-2");""!==e.value&&""!==t.value?location.replace(`https://report.dailyhackstore.co.ke/pages/date/expense/${e.value}/${t.value}`):(e.style.border="2px solid red",e.style.outline="none",t.style.border="2px solid red",t.style.outline="none",sleep(2500).then(()=>{e.style.border="",e.style.outline="",t.style.border="",t.style.outline=""}))})}},__filterReport:{init:function(){FilterInventory()}},__movieshop:{init:function(){FilterInventory();var e=document.getElementById("fiter-movieshop");e.addEventListener("change",function(){currentOption=e.value,currentOptionText=this.options[this.selectedIndex].value,location.replace(`https://report.dailyhackstore.co.ke/pages/reports/movie/${currentOptionText}`)}),document.getElementById("get-repo-btw").addEventListener("click",()=>{var e=document.querySelector("#date-1"),t=document.querySelector("#date-2");""!==e.value&&""!==t.value?location.replace(`https://report.dailyhackstore.co.ke/pages/date/movie/${e.value}/${t.value}`):(e.style.border="2px solid red",e.style.outline="none",t.style.border="2px solid red",t.style.outline="none",sleep(2500).then(()=>{e.style.border="",e.style.outline="",t.style.border="",t.style.outline=""}))})}},__sales:{init:function(){FilterInventory();var e=document.getElementById("filter-sales");e.addEventListener("change",function(){currentOption=e.value,currentOptionText=this.options[this.selectedIndex].value,location.replace(`https://report.dailyhackstore.co.ke/pages/reports/sales/${currentOptionText}`)}),document.getElementById("get-repo-btw").addEventListener("click",()=>{var e=document.querySelector("#date-1"),t=document.querySelector("#date-2");""!==e.value&&""!==t.value?location.replace(`https://report.dailyhackstore.co.ke/pages/date/sales/${e.value}/${t.value}`):(e.style.border="2px solid red",e.style.outline="none",t.style.border="2px solid red",t.style.outline="none",sleep(2500).then(()=>{e.style.border="",e.style.outline="",t.style.border="",t.style.outline=""}))})}},__total:{init:function(){FilterInventory();var e=document.getElementById("filter-total");e.addEventListener("change",function(){currentOption=e.value,currentOptionText=this.options[this.selectedIndex].value,location.replace(`https://report.dailyhackstore.co.ke/pages/reports/total/${currentOptionText}`)}),document.getElementById("get-repo-btw").addEventListener("click",()=>{var e=document.querySelector("#date-1"),t=document.querySelector("#date-2");""!==e.value&&""!==t.value?location.replace(`https://report.dailyhackstore.co.ke/pages/date/total/${e.value}/${t.value}`):(e.style.border="2px solid red",e.style.outline="none",t.style.border="2px solid red",t.style.outline="none",sleep(2500).then(()=>{e.style.border="",e.style.outline="",t.style.border="",t.style.outline=""}))})}},__reports:{init:function(){FilterInventory()}},__viewEdit:{init:function(){FilterInventory();document.getElementById("cyber-cash"),document.getElementById("cyber-till"),document.getElementById("ps-cash"),document.getElementById("ps-till"),document.getElementById("movie-cash"),document.getElementById("movie-till");const e=document.getElementById("sales-cash"),t=document.getElementById("sales-till"),n=document.getElementById("bought-price"),l=document.getElementById("sales-profit");document.getElementById("expense-value");e.addEventListener("input",function(){""!==t.value?(t.style.border="2px solid red",t.style.outline="none",document.getElementsByName("sales-till")[0].placeholder="fill one only",sleep(1e3).then(()=>{document.getElementsByName("sales-till")[0].placeholder="sell..till/other",t.style.border="",t.style.outline="",t.value=""})):""==e.value?l.value=0:l.value=e.value-n.value}),t.addEventListener("input",function(){""!==e.value?(e.style.border="2px solid red",e.style.outline="none",document.getElementsByName("sales-cash")[0].placeholder="fill one only",sleep(1e3).then(()=>{document.getElementsByName("sales-till")[0].placeholder="sell..cash",e.style.border="",e.style.outline="",e.value=""})):""==t.value?l.value=0:l.value=t.value-n.value});$(document).on("input",".income-calc",function(){var e=0;$(".income-calc").each(function(){e+=+$(this).val()}),$("#total-cash").val(e);$("#total-cash").val(e);document.getElementById("total-sales-out-cash").innerHTML=`cash total: ${e}`}),$(document).on("input",".income-calc-till",function(){var e=0;$(".income-calc-till").each(function(){e+=+$(this).val()}),$("#total-till").val(e);$("#total-till").val(e);document.getElementById("total-sales-out-till").innerHTML=`till total: ${e}`});var o=document.getElementById("product");o.addEventListener("change",function(){currentOption=o.value,currentOptionText=this.options[this.selectedIndex].text,$("#sc").load(`loadBuying/${currentOption}`,function(e,t,n){document.getElementById("bought-price").value=e,document.getElementById("bought-item").value=currentOptionText})}),$(document).ready(function(){var e=document.getElementById("recorddate").value;console.log(e)})}},viewItem:{init:function(){var e=new ThreeSixty(document.getElementById("threesixty"),{image:document.getElementById("item-image").src,width:"60%",height:"50%",prev:document.getElementById("prev"),next:document.getElementById("next")});e.play()}},editItem:{init:function(){$(document).ready(function(){$("form").on("submit",function(e){e.preventDefault();document.querySelector("#item-name"),document.querySelector("#item-quantity"),document.querySelector("#item-bp"),document.querySelector("#model");itemImage=document.querySelector("#product-image");var t=new FormData,n=$("#product-image")[0].files[0];t.append("product-image",n),$.ajax({url:`https://report.dailyhackstore.co.ke/pages/saveInventoryEdit/${document.getElementById("item-id").value}`,type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,dataType:"json",success:function(e){200==e.statusCode?(document.querySelector(".alert_success").style.display="none",document.getElementsByClassName("loader")[0].style.display="block",sleep(2100).then(()=>{document.getElementsByClassName("loader")[0].style.display="none",document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.display="block",document.getElementById("inventory-alert").style.color="#fff",document.getElementById("inventory-alert").innerHTML="item edited successfully!",$("#open-modal").load("loadInventoryData"),$("#product-avatar").attr("src","https://report.dailyhackstore.co.ke/public/images/images/open-box.png"),document.getElementById("product-image").value="",sleep(3500).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""}),location.replace("https://report.dailyhackstore.co.ke/pages/index")})):201==e.statusCode?(document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.color="#f85f5f",$("#inventory-alert").html("invalid file or missing field, please try again"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""})):417==e.statusCode&&(document.querySelector(".alert").style.display="block",document.getElementById("inventory-alert").style.color="#f85f5f",$("#inventory-alert").html("request could not be completed, check your connection"),sleep(4700).then(()=>{document.querySelector(".alert_success").style.display="none",document.getElementById("inventory-alert").innerHTML=""}))}})})})}}};